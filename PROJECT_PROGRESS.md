# ruoyi-react-template é¡¹ç›®è¿›åº¦æŠ¥å‘Š

## é¡¹ç›®æ¦‚è¿°
å°† hr-front (Vue3) é¡¹ç›®é‡æ„ä¸º React ç‰ˆæœ¬

## å½“å‰è¿›åº¦

### âœ… å·²å®Œæˆçš„å·¥ä½œ

#### ç¬¬ä¸€é˜¶æ®µï¼šé¡¹ç›®åˆå§‹åŒ–
- [x] ä½¿ç”¨ Vite åˆ›å»º React + TypeScript é¡¹ç›®
- [x] é…ç½®è·¯å¾„åˆ«å @/ â†’ src/
- [x] å®‰è£…æ ¸å¿ƒä¾èµ–ï¼ˆreact-router-dom, zustand, antd, axios, @tanstack/react-queryï¼‰
- [x] é…ç½®ç¯å¢ƒå˜é‡æ–‡ä»¶ï¼ˆ.env.development, .env.productionï¼‰
- [x] åˆ›å»ºå®Œæ•´ç›®å½•ç»“æ„

#### ç¬¬äºŒé˜¶æ®µï¼šè·¯ç”±ç³»ç»Ÿ
- [x] å®šä¹‰è·¯ç”±ç±»å‹ï¼ˆRouteItem, RoutesStructDataItem, ROUTE_ID_KEYï¼‰
- [x] åˆ›å»ºè·¯ç”±é…ç½®ï¼ˆroutesConfig.ts: è·¯ç”±IDå¸¸é‡ã€åŸºç¡€è·¯ç”±ã€å¼‚æ­¥è·¯ç”±ï¼‰
- [x] åˆ›å»ºè·¯ç”±æ ‘ç»“æ„ï¼ˆroutesTree.tsï¼‰
- [x] å®ç°è·¯ç”±è¾…åŠ©å·¥å…·ï¼ˆRouterHelper ç±»ï¼‰
- [x] å®ç°è·¯ç”±ç³»ç»Ÿï¼ˆBrowserRouter + useRoutesï¼‰

#### ç¬¬ä¸‰é˜¶æ®µï¼šé¡µé¢ç»„ä»¶
- [x] åŸºç¡€å¸ƒå±€ç»„ä»¶ï¼ˆBasicLayoutï¼‰
- [x] 404 é¡µé¢ï¼ˆNotFoundï¼‰
- [x] 403 é¡µé¢ï¼ˆForbiddenï¼‰
- [x] é¦–é¡µç»„ä»¶ï¼ˆHomePageï¼‰
- [x] ç™»å½•é¡µé¢ï¼ˆLoginï¼‰
- [x] ç³»ç»Ÿç®¡ç†å ä½ç»„ä»¶ï¼ˆUser, Role, Menu, Dept, Post, Dict, Config, Notice, Logï¼‰

#### ç¬¬å››é˜¶æ®µï¼šè®¤è¯ç³»ç»Ÿ
- [x] è®¤è¯ Storeï¼ˆauthStore.ts: Zustand + persistï¼‰
- [x] ç™»å½•/ç™»å‡ºé€»è¾‘
- [x] Token æŒä¹…åŒ–
- [x] ç”¨æˆ·ä¿¡æ¯å­˜å‚¨

#### ç¬¬äº”é˜¶æ®µï¼šè¯·æ±‚å°è£…
- [x] Axios å®ä¾‹é…ç½®
- [x] è¯·æ±‚æ‹¦æˆªå™¨ï¼ˆæ³¨å…¥ tokenã€ç§Ÿæˆ·ä¿¡æ¯ï¼‰
- [x] å“åº”æ‹¦æˆªå™¨ï¼ˆé”™è¯¯å¤„ç†ã€æ¶ˆæ¯æç¤ºï¼‰
- [x] **Token åˆ·æ–°æœºåˆ¶**ï¼ˆ401 è‡ªåŠ¨åˆ·æ–°ã€è¯·æ±‚é˜Ÿåˆ—ã€åˆ·æ–°å¤±è´¥å¤„ç†ï¼‰
- [x] å¤šç§Ÿæˆ·æ”¯æŒï¼ˆtenant-id, visit-tenant-idï¼‰
- [x] åç«¯å“åº”æ ¼å¼é€‚é…ï¼ˆæˆåŠŸç  200ï¼‰

#### ç¬¬å…­é˜¶æ®µï¼šæƒé™ç³»ç»Ÿ
- [x] æƒé™ Storeï¼ˆpermissionStore.tsï¼‰
- [x] è·¯ç”±ç”Ÿæˆé€»è¾‘
- [x] èœå•ç”Ÿæˆé€»è¾‘
- [x] æƒé™ Hooksï¼ˆuseHasPermission, useHasRoleï¼‰
- [x] Permission ç»„ä»¶ï¼ˆæ›¿ä»£ Vue v-hasPermiï¼‰

#### ç¬¬ä¸ƒé˜¶æ®µï¼šè·¯ç”±å®ˆå«
- [x] è·¯ç”±å®ˆå«ç»„ä»¶ï¼ˆGuard.tsxï¼‰
- [x] ç™½åå•é…ç½®
- [x] ç™»å½•çŠ¶æ€æ£€æŸ¥
- [x] è·¯ç”±åŠ è½½çŠ¶æ€å¤„ç†

## æ ¸å¿ƒåŠŸèƒ½å®ç°è¯´æ˜

### 1. Token åˆ·æ–°æœºåˆ¶
æ–‡ä»¶ä½ç½®ï¼š`src/request/index.ts:80-170`

åŠŸèƒ½ï¼š
- access-token è¿‡æœŸï¼ˆcode 401ï¼‰æ—¶è‡ªåŠ¨ç”¨ refresh-token åˆ·æ–°
- åˆ·æ–°æœŸé—´è¯·æ±‚é˜Ÿåˆ—ç®¡ç†ï¼ˆrequestListï¼‰
- åˆ·æ–°å¤±è´¥åˆ™è·³è½¬ç™»å½•é¡µ
- refresh-token è¿‡æœŸç›´æ¥ç™»å‡º

### 2. å¤šç§Ÿæˆ·æ”¯æŒ
è¯·æ±‚å¤´æ³¨å…¥ï¼š
- `tenant-id`: å½“å‰ç§Ÿæˆ· IDï¼ˆä» localStorage è·å–ï¼‰
- `visit-tenant-id`: è®¿é—®ç§Ÿæˆ· IDï¼ˆç™»å½•æ—¶è®¾ç½®ï¼‰

### 3. åç«¯å“åº”æ ¼å¼
ç»Ÿä¸€å“åº”æ ¼å¼ï¼š
```typescript
{
  code: 200,  // æˆåŠŸç 
  data: T,
  msg: "æ“ä½œæˆåŠŸ"
}
```

### 4. è·¯ç”±è¾…åŠ©å·¥å…·
æ–‡ä»¶ä½ç½®ï¼š`src/utils/routerHelper.ts`

åŠŸèƒ½ï¼š
- `jumpTo(id)`: æ ¹æ®è·¯ç”±IDè·³è½¬
- `jumpToByPath(path)`: æ ¹æ®è·¯å¾„è·³è½¬
- `createRoutesConfigByPermissions()`: æ ¹æ®æƒé™åˆ›å»ºè·¯ç”±
- `getBreadcrumb(path)`: è·å–é¢åŒ…å±‘è·¯å¾„

## é¡¹ç›®ç»“æ„

```
src/
â”œâ”€â”€ api/                    # API æ¥å£å±‚ï¼ˆå¾…æ‰©å±•ï¼‰
â”œâ”€â”€ router/                 # è·¯ç”±é…ç½®
â”‚   â”œâ”€â”€ types.ts            # è·¯ç”±ç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ routesConfig.ts     # è·¯ç”±é…ç½®
â”‚   â”œâ”€â”€ routesTree.ts       # è·¯ç”±æ ‘
â”‚   â”œâ”€â”€ Guard.tsx           # è·¯ç”±å®ˆå«
â”‚   â””â”€â”€ index.tsx           # è·¯ç”±å…¥å£
â”œâ”€â”€ store/                  # Zustand stores
â”‚   â”œâ”€â”€ authStore.ts        # è®¤è¯ store
â”‚   â””â”€â”€ permissionStore.ts  # æƒé™ store
â”œâ”€â”€ layouts/                # å¸ƒå±€ç»„ä»¶
â”‚   â”œâ”€â”€ BasicLayout.tsx     # åŸºç¡€å¸ƒå±€
â”‚   â””â”€â”€ BasicLayout.module.scss
â”œâ”€â”€ views/                  # é¡µé¢ç»„ä»¶
â”‚   â”œâ”€â”€ Login/              # ç™»å½•é¡µ
â”‚   â”œâ”€â”€ HomePage.tsx        # é¦–é¡µ
â”‚   â”œâ”€â”€ NotFound.tsx        # 404
â”‚   â”œâ”€â”€ Forbidden.tsx       # 403
â”‚   â””â”€â”€ system/             # ç³»ç»Ÿç®¡ç†
â”œâ”€â”€ components/             # å…¬å…±ç»„ä»¶
â”‚   â””â”€â”€ Permission/         # æƒé™ç»„ä»¶
â”œâ”€â”€ hooks/                  # è‡ªå®šä¹‰ hooks
â”‚   â””â”€â”€ usePermission.ts    # æƒé™ hooks
â”œâ”€â”€ utils/                  # å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ routerHelper.ts     # è·¯ç”±è¾…åŠ©å·¥å…·
â”œâ”€â”€ types/                  # TypeScript ç±»å‹
â”‚   â””â”€â”€ auth.ts             # è®¤è¯ç›¸å…³ç±»å‹
â”œâ”€â”€ request/                # è¯·æ±‚å°è£…
â”‚   â”œâ”€â”€ index.ts            # è¯·æ±‚ä¸»æ–‡ä»¶ï¼ˆå« token åˆ·æ–°ï¼‰
â”‚   â””â”€â”€ types.ts            # è¯·æ±‚ç›¸å…³ç±»å‹
â”œâ”€â”€ App.tsx                 # åº”ç”¨å…¥å£
â”œâ”€â”€ main.tsx                # ä¸»å…¥å£
â””â”€â”€ vite-env.d.ts           # Vite ç¯å¢ƒå˜é‡ç±»å‹
```

## å¾…å®Œæˆçš„å·¥ä½œ

### â³ é¦–é¡µèœå•åŠ è½½
**ä»»åŠ¡**ï¼šå®ç°é¦–é¡µåŠ è½½æ—¶æ£€æŸ¥èœå•æƒé™ï¼Œæ— æƒé™åˆ™è°ƒç”¨æ¥å£è·å–

æ–‡ä»¶ä½ç½®ï¼š
- `src/views/HomePage.tsx`: é¦–é¡µç»„ä»¶
- `src/router/Guard.tsx`: è·¯ç”±å®ˆå«

å®ç°è¦ç‚¹ï¼š
- é¦–é¡µæ£€æµ‹æ˜¯å¦æœ‰èœå•æƒé™
- æ²¡æœ‰åˆ™è°ƒç”¨ `permissionStore.generateRoutes()`
- è·å–å¤±è´¥ï¼ˆ401/403ï¼‰â†’ è·³è½¬ç™»å½•é¡µ
- æ·»åŠ  loading çŠ¶æ€ï¼ˆéª¨æ¶å±æˆ– Spinï¼‰

### ğŸ“‹ åç»­æ‰©å±•å·¥ä½œ

#### UI ç»„ä»¶ä¼˜åŒ–
- [ ] å®Œå–„ BasicLayoutï¼ˆä¾§è¾¹èœå•ã€é¡¶éƒ¨å¯¼èˆªã€å†…å®¹åŒºï¼‰
- [ ] å®ç°èœå•ç»„ä»¶ï¼ˆåŸºäº Ant Design Menuï¼‰
- [ ] å®ç°å¤´éƒ¨ç»„ä»¶ï¼ˆç”¨æˆ·ä¿¡æ¯ã€é€€å‡ºç™»å½•ï¼‰
- [ ] å®ç°é¢åŒ…å±‘ç»„ä»¶

#### ç³»ç»Ÿç®¡ç†é¡µé¢
- [ ] ç”¨æˆ·ç®¡ç†é¡µé¢ï¼ˆCRUDï¼‰
- [ ] è§’è‰²ç®¡ç†é¡µé¢
- [ ] èœå•ç®¡ç†é¡µé¢
- [ ] å…¶ä»–ç³»ç»Ÿç®¡ç†é¡µé¢

#### åŠŸèƒ½å¢å¼º
- [ ] å›½é™…åŒ–æ”¯æŒ
- [ ] ä¸»é¢˜åˆ‡æ¢
- [ ] å…¨å±€æœç´¢
- [ ] æ“ä½œæ—¥å¿—è®°å½•

## å¯åŠ¨é¡¹ç›®

```bash
# è¿›å…¥é¡¹ç›®ç›®å½•
cd ruoyi-react-template

# å®‰è£…ä¾èµ–ï¼ˆå¦‚æœªå®‰è£…ï¼‰
pnpm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
pnpm run dev
```

è®¿é—®åœ°å€ï¼šhttp://localhost:3000

## æŠ€æœ¯æ ˆ

- **æ¡†æ¶**: React 18.3+ + TypeScript 5.9+
- **æ„å»ºå·¥å…·**: Vite 7.x
- **è·¯ç”±**: React Router v6.28+
- **çŠ¶æ€ç®¡ç†**: Zustand 5.0+ + persist ä¸­é—´ä»¶
- **UIç»„ä»¶åº“**: Ant Design v6.1+
- **HTTPå®¢æˆ·ç«¯**: Axios 1.7+
- **è¯·æ±‚åº“**: @tanstack/react-query 5.0+
- **CSSæ–¹æ¡ˆ**: CSS Modules + Sass
- **åŒ…ç®¡ç†å™¨**: pnpm

## å‚è€ƒé¡¹ç›®

- **æ¶æ„å‚è€ƒ**: `/Users/zpu/Documents/my_study/github/moderate-react-admin`
- **è¯·æ±‚å°è£…å‚è€ƒ**: `/Users/zpu/Documents/hs_code/whole-course-front/src/request`
- **åŸé¡¹ç›®**: `/Users/zpu/Documents/gh_code/hr-front`

## éªŒè¯æµ‹è¯•

### ç¬¬ä¸€é˜¶æ®µéªŒè¯
- [x] é¡¹ç›®å¯æ­£å¸¸å¯åŠ¨
- [x] è®¿é—®åŸºç¡€è·¯ç”±ï¼ˆ/ã€/loginã€/404ï¼‰
- [x] è·¯ç”±è·³è½¬æ­£å¸¸

### ç¬¬äºŒé˜¶æ®µéªŒè¯
- [x] åŠ¨æ€è·¯ç”±æ¸²æŸ“æ­£å¸¸
- [x] åµŒå¥—è·¯ç”±æ­£å¸¸
- [x] è·¯ç”±é…ç½®ç”Ÿæ•ˆ

### ç¬¬ä¸‰é˜¶æ®µéªŒè¯
- [ ] ç™»å½•åŠŸèƒ½æ­£å¸¸ï¼ˆéœ€è¦åç«¯æ¥å£ï¼‰
- [x] Token æŒä¹…åŒ–
- [x] ç™»å½•åè·³è½¬é¦–é¡µ
- [x] è·¯ç”±å®ˆå«ç”Ÿæ•ˆï¼ˆå·²ä¿®å¤ Guard ç»„ä»¶åœ¨ Router ä¸Šä¸‹æ–‡ä¸­ï¼‰

### ç¬¬å››é˜¶æ®µéªŒè¯
- [ ] æƒé™æ§åˆ¶ç”Ÿæ•ˆï¼ˆéœ€è¦åç«¯æ¥å£ï¼‰
- [ ] æ— æƒé™ç»„ä»¶éšè—
- [ ] åŠ¨æ€è·¯ç”±åŠ è½½ï¼ˆéœ€è¦åç«¯æ¥å£ï¼‰

## æ³¨æ„äº‹é¡¹

1. **åŠ¨æ€å¯¼å…¥é™åˆ¶**: Vite ä¸æ”¯æŒå®Œå…¨åŠ¨æ€çš„å¯¼å…¥è·¯å¾„ï¼Œéœ€è¦æ˜¾å¼å£°æ˜æ‰€æœ‰å¯èƒ½çš„ç»„ä»¶è·¯å¾„
2. **Token åˆ·æ–°**: å·²åœ¨ `request/index.ts` ä¸­å®ç°å®Œæ•´çš„åˆ·æ–°æœºåˆ¶
3. **å¤šç§Ÿæˆ·**: ç™»å½•æ—¶ä¼šè®¾ç½® `visit-tenant-id`
4. **åç«¯æ¥å£**: éœ€è¦é€‚é…å®é™…çš„åç«¯ API åœ°å€å’Œå“åº”æ ¼å¼
5. **è·¯ç”±å®ˆå«ä¸Šä¸‹æ–‡**: Guard ç»„ä»¶å¿…é¡»åœ¨ BrowserRouter å†…éƒ¨æ‰èƒ½ä½¿ç”¨ useNavigate/useLocation hooksï¼ˆå·²åœ¨ src/router/index.ts:78 ä¸­ä¿®å¤ï¼‰

## ä¸‹ä¸€æ­¥å»ºè®®

1. å®ç°é¦–é¡µèœå•åŠ è½½é€»è¾‘
2. å®Œå–„å¸ƒå±€ç»„ä»¶ï¼ˆä¾§è¾¹æ ã€é¡¶éƒ¨å¯¼èˆªï¼‰
3. å¯¹æ¥å®é™…åç«¯æ¥å£è¿›è¡Œè”è°ƒ
4. å®ç°ç”¨æˆ·ç®¡ç†é¡µé¢ä½œä¸ºç¤ºä¾‹
5. æ·»åŠ å•å…ƒæµ‹è¯•

---

**æœ€åæ›´æ–°**: 2026-02-14
**é¡¹ç›®çŠ¶æ€**: ğŸŸ¢ åŸºç¡€æ¡†æ¶å·²å®Œæˆï¼Œå¯æ­£å¸¸å¯åŠ¨
